# 배포 및 외부 서비스 관리 가이드 (Deployment & External Service Guide)

이 문서는 개발 이외에 서비스를 실제로 운영하기 위해 필요한 **인프라 구축, 외부 계정 설정, 배포 절차**를 정리한 가이드입니다.

---

## 1. 외부 서비스 준비 로드맵 (External Setup)
개발 시작 단계부터 미리 준비해야 하는 계정 및 설정 리스트입니다.

| 단계 | 항목 | 목적 | 비고 |
| :--- | :--- | :--- | :--- |
| **Step 1** | **Apple Developer Program** | iOS 앱 배포 (연회비 약 12만원) | 법인/개인 등록 필요 |
| **Step 2** | **Google Play Console** | Android 앱 배포 (등록비 약 3만원, 1회) | 구글 계정 필요 |
| **Step 3** | **Supabase** | DB, 인증, 파일저장, 에지 함수(백엔드) | **AWS보다 훨씬 쉽고 무료 플랜 강력** |
| **Step 4** | **Vercel** | 관리자 페이지 및 웹 서비스 호스팅 | 클릭 몇 번으로 자동 배포 |
| **Step 5** | **도메인** | 가비아/후이즈 등에서 도메인 구매 | `imfine.app` 등 브랜드 도메인 |

---

## 2. 인프라 및 DB 구축 가이드 (Supabase & Vercel)
복잡한 서버 설정 없이 클릭 몇 번으로 앱의 '기능'을 구현할 수 있는 현대적인 환경입니다.

### A. Supabase (All-in-One 백엔드)
- **역할:** 데이터베이스(DB) + 회원가입(인증) + 파일저장(S3 대용) + 알림 발송.
- **장점:** 
    - AWS처럼 서버를 직접 관리할 필요가 전혀 없습니다.
    - PostgreSQL DB를 즉시 만들어주며, 엑셀처럼 데이터를 관리할 수 있는 웹 UI를 제공합니다.
    - 회원가입 기능을 코드 몇 줄로 붙일 수 있습니다.
- **방법:** `supabase.com` 가입 후 프로젝트 생성 -> 'Table Editor'에서 테이블 생성.

### B. Vercel (웹 호스팅)
- **역할:** 관리자 페이지나 소개용 웹사이트를 올리는 공간.
- **장점:** 깃허브(GitHub)와 연결해두면 코드를 올릴 때마다 자동으로 앱이 업데이트되어 배포됩니다.

### C. Edge Functions (사후 메시지 스케줄러)
- **역할:** 24시간 서버를 켜두는 대신, 특정 시간마다 '알림 체크' 코드만 잠깐 실행시켜 비용과 복잡도를 낮춥니다.

---

## 3. 앱 스토어 배포 과정 (Store Deployment)
개발이 완료된 후 사용자가 다운로드 받을 수 있게 앱을 스토어에 올리는 과정입니다.

1. **빌드(Build):** 개발자가 작성한 코드를 `.apk` (안드로이드) 또는 `.ipa` (아이폰) 파일로 압축합니다.
2. **심사 제출:** Google Play Console과 Apple App Store Connect에 업로드합니다.
3. **심사 기간:** 
    - Google: 약 2~4일
    - Apple: 약 1~3일 (내용에 따라 반려될 수 있음)
4. **출시:** 심사가 승인되면 스토어에 공개됩니다.

---

## 4. 유지보수 및 관리 (Management)

### A. 모니터링
- **Sentry/Crashlytics:** 사용자의 앱이 꺼지거나 에러가 나면 개발자에게 즉시 알림을 보냅니다.
- **Google Analytics:** 얼마나 많은 사람이 들어오고 어떤 기능을 많이 쓰는지 분석합니다.

### B. 백업 및 보안
- **DB 백업:** RDS의 자동 백업 기능을 활성화하여 유사시 데이터를 복구합니다.
- **SSL 인증서:** 데이터 전송 시 암호화를 위해 https 주소를 무료(Let's Encrypt) 혹은 유료로 적용해야 합니다.

### C. 사후 메시지 발송 서버 관리
- **Cron Job:** 서버가 1분마다 "오늘 메시지 보낼 사람이 있나?" 확인하는 체크 로직이 24시간 끊기지 않고 돌아가야 합니다. (PM2 등의 관리 도구 활용)
